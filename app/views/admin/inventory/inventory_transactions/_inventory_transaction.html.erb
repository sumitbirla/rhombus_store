<% 
  t = inventory_transaction
  actions = [] 
  actions << 'replenish' if t.items.any? { |x| x.quantity > 0 }
  actions << 'remove' if t.items.any? { |x| x.quantity < 0 }
%>

<tr>
  <td><%= systime t.created_at %></td>
  <td>
    <% if t.shipment %>
      <%= link_to t.shipment.to_s, admin_store_shipment_path(t.shipment) %>
    <% elsif t.purchase_order_id %>
      <%= link_to "PO #{t.purchase_order_id}", admin_inventory_purchase_order_path(t.purchase_order_id) %>
    <% else %>
      Manual
    <% end %>
  </td>
  <td><%= actions.join(" / ") %></td>
  <td class="text-center"><%= pluralize(t.items.length, "item") %></td>
  <td class="text-right"><%= number_with_delimiter(t.items.sum(:quantity).abs) %></td>
	<td class="text-center">
    <% if t.user_id %>
      <%= link_to t.user, admin_system_user_path(t.user) %>
    <% else %>
      <span class="light">- system -</span>
    <% end %>
  </td>
	<td class="text-right actions">
    <%= link_to :edit, edit_admin_inventory_inventory_transaction_path(t) %> &nbsp; 
		<%= link_to :delete, 
					  { action: "destroy", id: t.id }, 
					  method: :delete, 
					  data: { confirm: "Are you sure? All items items in this transaction will be deleted." } %>
	</td>
</tr>